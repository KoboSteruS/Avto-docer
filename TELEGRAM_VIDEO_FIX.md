# üé¨ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –±–æ–ª—å—à–∏–º–∏ –≤–∏–¥–µ–æ –∏–∑ Telegram

## –ü—Ä–æ–±–ª–µ–º–∞

Telegram Bot API –∏–º–µ–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ **20MB** –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ `getFile`. –í–∏–¥–µ–æ –±–æ–ª—å—à–µ 20MB –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —á–µ—Ä–µ–∑ Bot API, –¥–∞–∂–µ –µ—Å–ª–∏ –±–æ—Ç "–≤–∏–¥–∏—Ç" –∏—Ö –≤ –∫–∞–Ω–∞–ª–µ.

## –†–µ—à–µ–Ω–∏–µ

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω **–í–ê–†–ò–ê–ù–¢ 1**: –î–ª—è –±–æ–ª—å—à–∏—Ö –≤–∏–¥–µ–æ (>20MB) –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–µ–≤—å—é –∏ –∫–Ω–æ–ø–∫—É "–°–º–æ—Ç—Ä–µ—Ç—å –≤ Telegram" —Å–æ —Å—Å—ã–ª–∫–æ–π –Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –ø–æ—Å—Ç.

---

## –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

### 1. –ú–æ–¥–µ–ª—å Article

–î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è:
- `telegram_channel_username` - username –∫–∞–Ω–∞–ª–∞ (–±–µ–∑ @)
- `telegram_message_id` - ID —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –∫–∞–Ω–∞–ª–µ

–î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã:
- `is_large_telegram_video()` - –ø—Ä–æ–≤–µ—Ä–∫–∞, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —ç—Ç–æ –±–æ–ª—å—à–∏–º –≤–∏–¥–µ–æ
- `get_telegram_video_url()` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Å—ã–ª–∫–∏ –Ω–∞ –≤–∏–¥–µ–æ –≤ Telegram

### 2. –ë–æ—Ç (run_unified_bot.py)

**–õ–æ–≥–∏–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤–∏–¥–µ–æ:**

```python
if file_size > 20 * 1024 * 1024:  # > 20MB
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º channel –∏ message_id
    article.telegram_channel_username = channel_username
    article.telegram_message_id = message_id
    article.video_url = None
else:
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º file_id –¥–ª—è –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è
    article.video_url = file_id
```

### 3. –®–∞–±–ª–æ–Ω—ã

**articles_list.html –∏ article_detail.html:**

- –ü—Ä–æ–≤–µ—Ä–∫–∞ `{% if article.is_large_telegram_video %}`
- –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–µ–≤—å—é (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–ª–∏ placeholder)
- –ö–Ω–æ–ø–∫–∞ "–°–º–æ—Ç—Ä–µ—Ç—å –≤ Telegram" —Å–æ —Å—Å—ã–ª–∫–æ–π

---

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –î–ª—è –≤–∏–¥–µ–æ < 20MB:
1. –ë–æ—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç `file_id` –≤ `video_url`
2. –°–∞–π—Ç –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –≤–∏–¥–µ–æ —á–µ—Ä–µ–∑ `/stati/video/<article_id>/`
3. –í–∏–¥–µ–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –ø—Ä—è–º–æ –Ω–∞ —Å–∞–π—Ç–µ

### –î–ª—è –≤–∏–¥–µ–æ > 20MB:
1. –ë–æ—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç `telegram_channel_username` –∏ `telegram_message_id`
2. –°–∞–π—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–µ–≤—å—é –∏ –∫–Ω–æ–ø–∫—É
3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ Telegram –ø–æ —Å—Å—ã–ª–∫–µ `https://t.me/{channel}/{message_id}`
4. –í–∏–¥–µ–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –≤ Telegram (CDN —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–¥–µ–∞–ª—å–Ω–æ)

---

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

‚úÖ **–ù–æ–ª—å –∫–æ—Å—Ç—ã–ª–µ–π** - –ø—Ä–æ—Å—Ç–æ–µ –∏ –ø–æ–Ω—è—Ç–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ  
‚úÖ **–ù–æ–ª—å —Å–µ—Ä–≤–µ—Ä–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏** - –Ω–µ –∫–∞—á–∞–µ–º –±–æ–ª—å—à–∏–µ —Ñ–∞–π–ª—ã  
‚úÖ **–í–∏–¥–µ–æ –ª—é–±–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞** - –Ω–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π  
‚úÖ **Telegram CDN** - —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–¥–µ–∞–ª—å–Ω–æ  
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** - –±–æ—Ç —Å–∞–º –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–∞–∑–º–µ—Ä

---

## –ú–∏–≥—Ä–∞—Ü–∏—è

–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
python manage.py makemigrations
python manage.py migrate
```

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –î–æ–±–∞–≤—å—Ç–µ –≤ –∫–∞–Ω–∞–ª –≤–∏–¥–µ–æ > 20MB
2. –ë–æ—Ç –¥–æ–ª–∂–µ–Ω –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –µ–≥–æ –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å `telegram_channel_username` –∏ `telegram_message_id`
3. –ù–∞ —Å–∞–π—Ç–µ –¥–æ–ª–∂–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –ø—Ä–µ–≤—å—é –∏ –∫–Ω–æ–ø–∫–∞ "–°–º–æ—Ç—Ä–µ—Ç—å –≤ Telegram"
4. –ö–Ω–æ–ø–∫–∞ –¥–æ–ª–∂–Ω–∞ –≤–µ—Å—Ç–∏ –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É –≤ Telegram

---

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –î–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å—Ç–∞—Ç–µ–π —Å –±–æ–ª—å—à–∏–º–∏ –≤–∏–¥–µ–æ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –ª–∏–±–æ:
  - –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –∏—Ö —á–µ—Ä–µ–∑ –±–æ—Ç–∞
  - –ò–ª–∏ –≤—Ä—É—á–Ω—É—é –∑–∞–ø–æ–ª–Ω–∏—Ç—å `telegram_channel_username` –∏ `telegram_message_id` –≤ –∞–¥–º–∏–Ω–∫–µ

- –í–∏–¥–µ–æ < 20MB –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ —Ä–∞–Ω—å—à–µ (–ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ)

