"""
Команда для обновления услуги "Восстановление Air BAG" с подробной информацией
"""
from django.core.management.base import BaseCommand
from services.models import Service
from loguru import logger


class Command(BaseCommand):
    """
    Команда для обновления услуги "Восстановление Air BAG" с детальной информацией
    """
    help = 'Обновляет услугу "Восстановление Air BAG" с подробной информацией'

    def handle(self, *args, **options):
        """
        Обновление услуги "Восстановление Air BAG"
        """
        try:
            service = Service.objects.get(slug='vosstanovlenie-air-bag')
        except Service.DoesNotExist:
            self.stdout.write(
                self.style.ERROR('Услуга "Восстановление Air BAG" не найдена. Сначала создайте её через create_services.')
            )
            return

        # Краткое описание для карточек
        short_description = (
            'Восстановление крышки Airbag после разрыва. Профессиональный ремонт подушек безопасности '
            'и передней панели (торпеды) после срабатывания системы безопасности.'
        )

        # Основное описание
        description = (
            'Восстановление крышки Airbag после разрыва. Замена крышки Airbag после срабатывания подушек безопасности '
            'не всегда возможен. Есть модели на которые уже не найти материалов и подходящих запчастей.\n\n'
            'Наши специалисты смогут восстановить крышку Airbag на вашем авто, а так же восстановить переднюю панель (торпеду), '
            'после срабатывания подушек безопасности. Делаем все качественно!'
        )

        # Дополнительный контент (HTML поддерживается)
        content = (
            '<h2>Почему восстановление, а не замена?</h2>\n'
            '<p>Замена крышки Airbag после срабатывания подушек безопасности не всегда возможна. '
            'Есть модели автомобилей, на которые уже не найти материалов и подходящих запчастей. '
            'В таких случаях восстановление становится единственным решением.</p>\n\n'
            '<h2>Что мы восстанавливаем</h2>\n'
            '<p>Наши специалисты смогут восстановить:</p>\n'
            '<ul>\n'
            '<li>Крышку Airbag на вашем авто</li>\n'
            '<li>Переднюю панель (торпеду) после срабатывания подушек безопасности</li>\n'
            '</ul>\n\n'
            '<h2>Качество работ</h2>\n'
            '<p>Мы используем только качественные материалы и проверенные технологии восстановления. '
            'После ремонта ваша панель будет выглядеть как новая, а функциональность системы безопасности '
            'будет полностью восстановлена.</p>'
        )

        # Список направлений/услуг
        features = (
            'Восстановление крышки Airbag\n'
            'Восстановление передней панели (торпеды)\n'
            'Ремонт после срабатывания подушек безопасности\n'
            'Восстановление для моделей без запчастей\n'
            'Полная диагностика системы безопасности\n'
            'Качественные материалы и технологии'
        )

        # Обновляем услугу
        service.short_description = short_description
        service.description = description
        service.content = content
        service.features = features
        service.save()

        logger.info(f'Услуга "{service.title}" успешно обновлена')
        self.stdout.write(
            self.style.SUCCESS(f'Услуга "{service.title}" успешно обновлена с подробной информацией')
        )
