"""
Команда для обновления услуги "Установка автосигнализации" с подробной информацией
"""
from django.core.management.base import BaseCommand
from services.models import Service
from loguru import logger


class Command(BaseCommand):
    """
    Команда для обновления услуги "Установка автосигнализации" с детальной информацией
    """
    help = 'Обновляет услугу "Установка автосигнализации" с подробной информацией'

    def handle(self, *args, **options):
        """
        Обновление услуги "Установка автосигнализации"
        """
        try:
            service = Service.objects.get(slug='signalizatsiya')
        except Service.DoesNotExist:
            self.stdout.write(
                self.style.ERROR('Услуга "Установка автосигнализации" не найдена. Сначала создайте её через create_services.')
            )
            return

        # Краткое описание для карточек
        short_description = (
            'Установка автосигнализации с автозапуском двигателя. Защита от угона и действий вандалов. '
            'Профессиональная установка сигнализаций StarLine и Pandora.'
        )

        # Основное описание
        description = (
            'Сигнализация на автомобиль - это на сегодняшний день не блажь, а необходимость. Ведь учитывая стоимость «железных коней» '
            'каждый автовладелец стремится обеспечить для своего авто максимальную защиту от угона и действий вандалов. Своевременное '
            'уведомление владельца о противоправных действиях по отношению к его автомобилю, позволяет не допустить его повреждения или угона.\n\n'
            'В настоящее время существует несколько видов автосигнализации: односторонняя (без обратной связи), двусторонняя (с обратной связью), '
            'телематическая, с дистанционным запуском мотора автомобиля. От типа этого устройства зависит и возможность, а также специфика его '
            'установки на тот или иной автомобиль. Самой распространенной в настоящее время является сигнализация с автозапуском.\n\n'
            'Они могут отличаться друг от друга, способом организации связи между принимающим и передающим устройствами. Он может быть организован '
            'на базе радиосигнала, в GSM или GPRS сетях. Ввиду того что у первого вида, очень низкий уровень безопасности, все большей популярности '
            'набирают устройства, которые используют GSM и GPRS связь.'
        )

        # Дополнительный контент (HTML поддерживается)
        content = (
            '<h2>Установка сигнализации с автозапуском</h2>\n'
            '<p>Сигнализация на машину на сегодняшний день устанавливается не только для того чтобы обеспечить информирование владельца о несанкционированном '
            'прикосновении или взломе автомобиля, но и для обеспечения дистанционного управления некоторыми его механизмами, в частности двигателем.</p>\n\n'
            '<p>При помощи системы сигнализации можно осуществлять запуск мотора машины на расстоянии. Зачем это необходимо?</p>\n'
            '<ul>\n'
            '<li>для прогрева двигателя</li>\n'
            '<li>для разогрева салона автомобиля в зимнее время</li>\n'
            '<li>разморозки его обледеневших частей, в особенности стекол и зеркал</li>\n'
            '</ul>\n\n'
            '<p>Установка сигнализации с автозапуском избавляет автолюбителя от множества хлопот, обеспечивает комфорт в машине. Не нужно производить очистку от снега и льда. '
            'Находясь в доме или квартире, вам достаточно будет нажать на кнопку и заниматься своими делами. А когда придет время выезжать, водителя и пассажиров встретит '
            'теплый салон и разогретый двигатель, который позволит передвигаться в обычном режиме.</p>\n\n'
            '<p>Такая функция, обеспечивая комфорт пассажирам и водителю, позволяет экономить время и усилия, а также уберечь автомобиль от повышенного износа.</p>\n\n'
            '<p>Хорошая система, выгодная и удобная но, покупая ее не надо быть очень самонадеянным и производить установку самостоятельно, ведь это не такое уж и простое устройство. '
            'В нем реализованы разнообразные современные технологии, поэтому неправильная установка сигнализации, может привести к значительному снижению уровня безопасности, '
            'который она должна обеспечивать.</p>\n\n'
            '<h2>Цены</h2>\n'
            '<p>В настоящее время стоимость таких устройств колеблется от 5 до 7 тыс. рублей. Но это на простые аппараты. Сигнализации с расширенным функционалом обойдутся от 10 до 30 тыс. рублей.</p>\n\n'
            '<h2>Почему установка современной автосигнализации с запуском мотора машины дело сложное?</h2>\n'
            '<p>Большинство современных авто оснащено штатным иммобилайзером. Этот аппарат не даст возможность произвести запуск двигателя до тех пор, пока им не будет распознан '
            'уникализированный чип-метка. Поэтому, надежность и качество работы всей системы автосигнализации зависит от того каким образом будет решена задача гармонизации работы '
            'штатного иммобилайзера и алгоритма автозапуска.</p>\n\n'
            '<p>Специалисты без квалификации, не имеющие достаточного опыта произведения таких работ, решают все очень просто. Осуществляя подключение сигнализации они блокируют либо '
            'отключают штатный иммобилайзер, оставляя автомашину практически не защищенной от угона. А единственным и правильным решением является установка аппарата, который обеспечивает '
            'обход иммобилайзера. Им есть особое приемопередающее устройство сигналов чипа ключа. Его подключают к автосигнализации и устанавливают в труднодоступном месте машины.</p>\n\n'
            '<p>Только в этом случае автомашина будет оснащена по-настоящему эффективной сигнализацией с автозапуском мотора машины и работающим в нормальном режиме иммобилайзером.</p>\n\n'
            '<h2>Как это работает?</h2>\n'
            '<p>Пользователь, нажав кнопку на своем брелке управления, производит запуск двигателя автомобиля. Двери, багажник, а также капот продолжают стоять на сигнализации, т.е. находиться под охраной. '
            'И в случае попытки произведения несанкционированных действий в отношении авто сработает сирена и двигатель перестанет работать – заглохнет и будет заблокирован. После чего на брелок хозяина поступит тревожный сигнал.</p>\n\n'
            '<p>В число несанкционированных действий входит и подъем, а также погрузка автомобиля.</p>\n\n'
            '<h2>Что предлагает рынок?</h2>\n'
            '<p>В настоящее время на рынке таких устройств лидируют два производителя - «StarLine» и «Pandora». Между ними и идет самая серьезная борьба за клиента.</p>\n\n'
            '<p>Выбирать, какую установить сигнализацию на собственный автомобиль решать пользователю? Каждая из них предлагает покупателю собственные эксклюзивные решения.</p>\n\n'
            '<h3>StarLine</h3>\n'
            '<p>В комплектации Starline в отличие от Pandora идет сирена и модуль обхода штатного иммобилайзера. У обоих блок достаточно удобен для скрытого размещения. Брелок от Pandora сделан более качественно '
            'и может функционировать в суровых условиях эксплуатации. Обе сигнализации имеют диалоговый код с индивидуальными ключами шифрования. У сигнализации от Starline помехозащищенность лучше, потому что '
            'она использует не 10 переключающихся каналов, а 128 – 512.</p>\n\n'
            '<h3>Pandora</h3>\n'
            '<p>Оба комплекта могут поставляться как с CAN модуль, так и без него. Каждый аппарат обладает GSM модулем, поэтому управление сигнализацией можно производить и с помощью смартфона или другого совместимого устройства.</p>\n\n'
            '<p>Функциональность и дальность действия обоих комплектов практически одинаковы и составляют от 300 до 600 метров. При использовании GSM модуля ее можно значительно увеличить.</p>\n\n'
            '<p>Как Starline так и Pandora программирование и установка сигнализации на авто требуют знаний и умений. Программирование Starline и Pandora производиться через компьютер.</p>\n\n'
            '<p>В общем, какую сигнализацию поставить выбирать пользователю. Среди представленных на рынке комплектов от этих двух компаний, можно без труда выбрать то устройство, которое наилучшим образом будет соответствовать его требованиям.</p>\n\n'
            '<h2>Что предлагает наша компания?</h2>\n'
            '<p>Определившись с тем, какую сигнализацию, ставить, сразу возникает вопрос, где устанавливают сигнализацию? Такую услугу предлагает наша компания. Кроме этого мы производим:</p>\n'
            '<ul>\n'
            '<li>обслуживание сигнализаций</li>\n'
            '<li>ремонт сигнализаций</li>\n'
            '</ul>\n\n'
            '<p>У нас работают только квалифицированные специалисты, имеющие достаточный опыт в оказании подобных услуг. Обладая всеми необходимыми инструментами и самым современным оборудованием, они в состоянии произвести работы быстро и качественно.</p>\n\n'
            '<p>Компанией производится установка сигнализации в Петрозаводске, городе, где размещен ее главный офис и пункты сервиса.</p>\n\n'
            '<p>Наши цены не кусаются. Мы можем любую сигнализацию установить по цене ниже средней на рынке такого вида услуг. При этом гарантируем высокое качество и скорость работ. Выезжаем на место в любой уголок города Петрозаводска.</p>\n\n'
            '<p>Кроме этого, предлагаем своим клиентам удобные условия расчетов. Оплату можно произвести на месте наличными деньгами и по безналичному расчету, путем осуществления перевода средств или их перечисления с банковской карты.</p>\n\n'
            '<p>Звоните, обращайтесь и найдете надежного и добросовестного партнера, получите квалифицированные рекомендации специалистов работающих в нашей компании, в кратчайшие строки, качественно проделанные работы и за небольшую плату.</p>'
        )

        # Список направлений/услуг
        features = (
            'Установка односторонней сигнализации\n'
            'Установка двусторонней сигнализации\n'
            'Установка телематической сигнализации\n'
            'Установка сигнализации с автозапуском\n'
            'Установка сигнализации StarLine\n'
            'Установка сигнализации Pandora\n'
            'Обход штатного иммобилайзера\n'
            'Установка GSM/GPRS модуля\n'
            'Установка CAN модуля\n'
            'Программирование сигнализации\n'
            'Обслуживание сигнализаций\n'
            'Ремонт сигнализаций\n'
            'Дистанционный запуск двигателя\n'
            'Прогрев двигателя и салона\n'
            'Защита от угона\n'
            'Защита от действий вандалов\n'
            'Датчики удара и наклона\n'
            'Управление со смартфона\n'
            'Выезд специалиста на место\n'
            'Гарантия на выполненные работы'
        )

        # Обновляем услугу
        service.short_description = short_description
        service.description = description
        service.content = content
        service.features = features
        service.save()

        logger.info(f'Услуга "{service.title}" успешно обновлена')
        self.stdout.write(
            self.style.SUCCESS(f'Услуга "{service.title}" успешно обновлена с подробной информацией')
        )
