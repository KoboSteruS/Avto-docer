"""
Команда для обновления услуги "Полировка автомобиля" с подробной информацией
"""
from django.core.management.base import BaseCommand
from services.models import Service
from loguru import logger


class Command(BaseCommand):
    """
    Команда для обновления услуги "Полировка автомобиля" с детальной информацией
    """
    help = 'Обновляет услугу "Полировка автомобиля" с подробной информацией'

    def handle(self, *args, **options):
        """
        Обновление услуги "Полировка автомобиля"
        """
        try:
            service = Service.objects.get(slug='polirovka-avtomobilya')
        except Service.DoesNotExist:
            self.stdout.write(
                self.style.ERROR('Услуга "Полировка автомобиля" не найдена. Сначала создайте её через create_services.')
            )
            return

        # Краткое описание для карточек
        short_description = (
            'Профессиональная полировка кузова автомобиля для устранения дефектов, восстановления блеска и защиты '
            'лакокрасочного покрытия. Шик и блеск вашего автомобиля.'
        )

        # Основное описание
        description = (
            'Среди операций по восстановлению лакокрасочного покрытия современного автомобиля полировка занимает особое место. '
            'Полирование, направленно на устранение дефектов нанесения лакокрасочного материала, можно сравнить с восстановительной '
            'полировкой кузова автомобиля, когда в процессе его эксплуатации лакокрасочное покрытие получило некоторые повреждения.\n\n'
            'В результате полировки убираются такие дефекты, как царапины (если их глубина не превышает толщину лакокрасочного покрытия, '
            'т. е. не достигает грунта), затертости и оксидированные слои, присутствующие на поверхности кузова (их наличие выражается в '
            'помутнении лакокрасочного покрытия), неглубокие включения пыли, потеки, неярко выраженное оконтуривание границ участка покраски, '
            'проявление шлифовальных рисок в строении краски, водяные пятна и пузыри.\n\n'
            'После полировки лакокрасочное покрытие приобретает яркость, глубину, насыщенность цвета и блеск.'
        )

        # Дополнительный контент (HTML поддерживается)
        content = (
            '<h2>Защитная полировка кузова автомобиля</h2>\n'
            '<p>Иногда, для того чтобы обеспечить более длительную защиту лакокрасочного покрытия от неблагоприятного воздействия окружающей среды '
            '(когда мы имеем дело со старым покрытием), проводят защитную полировку кузова автомобиля. В этом случае тефлон, содержащийся в полировальных '
            'пастах или полиролях, нанесенный на поверхность кузова, создает защитную пленку.</p>\n\n'
            '<p>Благодаря этой пленке кузов:</p>\n'
            '<ul>\n'
            '<li>лучше моется</li>\n'
            '<li>отталкивает влагу (при высыхании капель воды на кузове не остаются пятна)</li>\n'
            '<li>не выгорает под воздействием ультрафиолетовых лучей</li>\n'
            '<li>защищен от абразивного износа под действием песка</li>\n'
            '<li>защищен от негативного химического воздействия соли</li>\n'
            '</ul>\n\n'
            '<p>Такая защитная полировка кузова может сохраняться в течение полугода. Но это уже зависит от качества примененных материалов.</p>\n\n'
            '<h2>Полировальная система Rupes Big Foot</h2>\n'
            '<p>Мы используем комплект полировальной системы Rupes Big Foot, которая известна своей эффективностью по удалению голографического эффекта, '
            'появляющегося в процессе полировки. Именно для решения этих проблем итальянской компанией Rupes и была внедрена новая полировальная система Big Foot, '
            'которая благодаря своей уникальной технологии способствует устранению «голографического» эффекта.</p>\n\n'
            '<p>Полировальные пасты Big Foot:</p>\n'
            '<ul>\n'
            '<li>экологически безвредны</li>\n'
            '<li>производятся на водной основе</li>\n'
            '<li>без силикона</li>\n'
            '</ul>\n\n'
            '<h2>Что устраняет полировка?</h2>\n'
            '<p>В процессе полировки устраняются следующие дефекты:</p>\n'
            '<ul>\n'
            '<li>Царапины (если их глубина не превышает толщину лакокрасочного покрытия)</li>\n'
            '<li>Затертости и оксидированные слои</li>\n'
            '<li>Помутнение лакокрасочного покрытия</li>\n'
            '<li>Неглубокие включения пыли</li>\n'
            '<li>Потеки</li>\n'
            '<li>Неярко выраженное оконтуривание границ участка покраски</li>\n'
            '<li>Проявление шлифовальных рисок в строении краски</li>\n'
            '<li>Водяные пятна и пузыри</li>\n'
            '</ul>\n\n'
            '<h2>Результат полировки</h2>\n'
            '<p>После полировки лакокрасочное покрытие приобретает:</p>\n'
            '<ul>\n'
            '<li>Яркость</li>\n'
            '<li>Глубину</li>\n'
            '<li>Насыщенность цвета</li>\n'
            '<li>Блеск</li>\n'
            '</ul>\n\n'
            '<p>Ваш автомобиль обретает шик и блеск, которые привлекают внимание и подчеркивают его престиж!</p>'
        )

        # Список направлений/услуг
        features = (
            'Восстановительная полировка кузова\n'
            'Защитная полировка кузова\n'
            'Устранение царапин\n'
            'Удаление затертостей и оксидированных слоев\n'
            'Устранение помутнения ЛКП\n'
            'Удаление включений пыли\n'
            'Устранение потеков\n'
            'Удаление шлифовальных рисок\n'
            'Устранение водяных пятен и пузырей\n'
            'Восстановление яркости и блеска\n'
            'Защита от ультрафиолета\n'
            'Защита от абразивного износа\n'
            'Защита от химического воздействия\n'
            'Полировальная система Rupes Big Foot\n'
            'Экологически безопасные материалы\n'
            'Защитная пленка на основе тефлона\n'
            'Долговечная защита (до 6 месяцев)'
        )

        # Обновляем услугу
        service.short_description = short_description
        service.description = description
        service.content = content
        service.features = features
        service.save()

        logger.info(f'Услуга "{service.title}" успешно обновлена')
        self.stdout.write(
            self.style.SUCCESS(f'Услуга "{service.title}" успешно обновлена с подробной информацией')
        )
