"""
Команда для обновления услуги "Химчистка салона" с подробной информацией
"""
from django.core.management.base import BaseCommand
from services.models import Service
from loguru import logger


class Command(BaseCommand):
    """
    Команда для обновления услуги "Химчистка салона" с детальной информацией
    """
    help = 'Обновляет услугу "Химчистка салона" с подробной информацией'

    def handle(self, *args, **options):
        """
        Обновление услуги "Химчистка салона"
        """
        try:
            service = Service.objects.get(slug='prof-khimchistka')
        except Service.DoesNotExist:
            self.stdout.write(
                self.style.ERROR('Услуга "Химчистка салона" не найдена. Сначала создайте её через create_services.')
            )
            return

        # Краткое описание для карточек
        short_description = (
            'Высококачественная профессиональная химчистка автомобиля. Немецкое оборудование KARCHER, профессиональная химия WURTH и BMW. '
            'Озонирование салона, устранение запахов и дезинфекция.'
        )

        # Основное описание
        description = (
            'Высококачественная профессиональная химчистка автомобиля – это достаточно дорогостоящая услуга, поскольку для ее выполнения требуется '
            'не только много времени, но и отнюдь недешевое оснащение.\n\n'
            'Для химчистки мы используем немецкое оборудование фирмы KARCHER, позволяющее осуществлять не только полный цикл очищения автотранспортного '
            'средства, но и устраняет неприятные запахи, а также дезинфицирует салон. Также с целью осуществления химчистки у нас используется '
            'профессиональный комплекс новой оригинальной химии WURTH и BMW.\n\n'
            'Высокотехнологичная и качественная химчистка автомобиля подразумевает выполнение комплексных услуг, включающих обрабатывание и очистку всех '
            'поверхностей, а также выведение пятен от пищи и даже устранение табачного дыма. Данная процедура способна вернуть транспортному средству '
            'ухоженность и первозданную чистоту. При необходимости мы можем произвести чистку отдельных элементов салона.'
        )

        # Дополнительный контент (HTML поддерживается)
        content = (
            '<h2>Для чего нужна химчистка автомобиля?</h2>\n'
            '<p>Большинство автолюбителей считают, что химическую чистку салона необходимо производить лишь перед тем, как продавать авто с целью придания '
            'ему свежего вида либо при возникновении неприятных посторонних запахов или пятен, не поддающихся самостоятельному устранению. Однако это отнюдь '
            'так, поскольку в отличие от иных вещей повседневного обихода, машина загрязняется значительно быстрее, не говоря о воздействии плохой погоды, '
            'когда в салон невольно попадают грязь и пыль.</p>\n\n'
            '<p>Более того, курящие в авто далеко не всегда замечают, как со временем пластиковые поверхности склонны терять первоначальный блеск, покрываясь '
            'желтоватым налетом, потолок из белоснежного становится грязно-желтоватым, а запах прокуренности в салоне становится явно заметным. Также причиной '
            'процесса загрязнения может быть и кондиционер.</p>\n\n'
            '<p>Своевременная химчистка автомобиля в Петрозаводске великолепно помогает сохранить салон в отличном состоянии, соответственно, способствует впоследствии '
            'его выгодной продаже, ведь ухоженность и чистота создают впечатление о хозяине авто, как о человеке аккуратном, оказывая тем самым большее доверие.</p>\n\n'
            '<h2>Ценообразование</h2>\n'
            '<p>Как правило, стоимость автомобильной химчистки зависит от следующих факторов:</p>\n'
            '<ul>\n'
            '<li><strong>Категория (размер) транспортного средства</strong> – чем больше габариты автотранспортного средства, тем соответственно больший период времени '
            'занимает процесс его очищения.</li>\n'
            '<li><strong>Степень загрязнения</strong> – если за машиной периодически не ухаживать, в ней со временем появляются пятна и грязь, которые в результате '
            'глубоко въедаются в поверхность. Чем дольше откладывается посещение сервиса, тем больше времени уйдет на устранение загрязнений.</li>\n'
            '</ul>\n\n'
            '<p>Безусловно, на сегодняшний день интернет буквально полон предложений от купонных сервисов, предлагающих химчистку с 70% скидкой. В такой ситуации очень важно, '
            'чтобы ожидания совпадали с возможностями сервиса, ведь организации, использующие подобные скидки, как правило, заточены не на качественное оказание услуг, '
            'а на поток. При этом технология и применяемое оборудование в таких сервисах зачастую не соответствуют предъявляемым требованиям к такого рода процессам...</p>\n\n'
            '<p>Главное, помнить – качественная химчистка авто нуждается в дорогостоящем профоборудовании, позволить себе которое способна далеко не любая организация. '
            'Кроме того, процедура химчистки должна осуществляться в специализированных помещениях, причем хорошо отапливаемых, чтобы грязь во время работы не попала в салон.</p>\n\n'
            '<h2>Технология</h2>\n'
            '<p>Прежде чем приступить к химчистке салона, следует выполнить бесконтактную мойку, с целью не занести грязь внутрь автотранспортного средства во время '
            'осуществляемых манипуляций.</p>\n\n'
            '<p>В частности, профессиональная химчистка авто состоит из следующих этапов:</p>\n\n'
            '<h3>1. Обработка потолка</h3>\n'
            '<p>С целью размягчения поверхности потолок автомобиля подвергается обрабатыванию паром, имеющим определенную температуру и давление, после чего на некоторое '
            'время покрывается специальным химикатом и снова подвергается обработке паром для улучшения реакции. Затем при помощи пылесоса с функцией мойки с поверхности '
            'потолка удаляются все химические препараты вместе с грязью.</p>\n\n'
            '<h3>2. Обработка дверей и стоек</h3>\n'
            '<p>Аналогичная процедура проделывается с дверями и стойками. Особое внимание стоит уделять различным щелям, пазам, а также пепельным стаканам.</p>\n\n'
            '<h3>3. Обработка сидений</h3>\n'
            '<p>Сидения автомобиля подвергаются обработке парогенератором и покрытию составом химических средств, специально предназначенными для очищения кожаных или '
            'велюровых сидений. Очень важно быть предельно осторожными с временным промежутком обработки химией, поскольку она может глубоко въесться в поверхность, '
            'что может привести к повреждению кожи (ткани). Соответственно, проф химчистка автомобиля должна выполняться только профессионалом!</p>\n\n'
            '<h3>4. Обработка пола</h3>\n'
            '<p>Затем с помощью пылесоса обрабатывается поверхность пола.</p>\n\n'
            '<h3>5. Обработка стекол и пластика</h3>\n'
            '<p>После чистки пола необходимо обработать стекла и детали из пластика, которые чистятся парогенератором. Заодно паром обрабатываются и динамики аудиосистемы. '
            'По желанию заказчика пластиковые поверхности можно обработать защитной полиролью, чтобы защитить его от выгорания и придать блеск. Стекла также принято очищать '
            'при помощи парогенератора, что позволяет удалить разводы, следы от насекомых и масляные пятна, обеспечивая тем самым идеальную прозрачность.</p>\n\n'
            '<h3>6. Озонирование салона</h3>\n'
            '<p>Далее проф химчистка авто завершается озонированием салона. Очень важно перед этим продуть паром вентиляционные отверстия системы обогрева, а затем можно '
            'приступать непосредственно к озонированию. Данная процедура необходима для придания свежести внутри авто, а также уничтожения посторонних запахов.</p>\n\n'
            '<h3>7. Химчистка багажника</h3>\n'
            '<p>Химчистка багажника аналогична вышеописанным этапам. Она может осуществляться как в комплексе, так и быть отдельной услугой. Эта процедура имеет несильные '
            'отличия от предыдущих этапов и требуется при возникновении посторонних запахов и по мере загрязнения.</p>\n\n'
            '<h3>8. Чистка колесных дисков</h3>\n'
            '<p>Профессиональная химчистка авто в Петрозаводске также включает в себя комплекс услуг по чистке колесных дисков. Ведь агрессивная окружающая среда оказывает на '
            'их состояние далеко не лучшее влияние: битум, реагент, а также пыльца от колодок, которые разогреваются до 500ºС. В процессе торможения они налипают на диски, в '
            'результате чего образуется желтоватый налет, отпадает лакокрасочный слой. При появлении таких признаков желательно воспользоваться данной услугой. Тем более что '
            'после очищения колпаки и диски будут покрыты специальным составом, цель нанесения которого – отталкивание воды и грязи.</p>\n\n'
            '<h2>Сложные загрязнения</h2>\n'
            '<p>Стоит также отметить, что сложнее всего устранить запах рыбы, яиц, молочных продуктов, мочи животных, а также желательно сразу же выводить винные пятна, '
            'следы от шампанского, крови или кетчупа, так как со временем они застаревают, что значительно усложняет их полнейшее устранение.</p>\n\n'
            '<h2>Доверьте химчистку авто настоящим профессионалам!</h2>\n'
            '<p>Если вас заинтересовала такая услуга как химчистка авто или у вас появились вопросы, вы всегда можете обратиться к нам! Мы не только тщательно отобрали своих '
            'сотрудников, но и основательно подготовили их к оказанию услуг по химчистке автомобиля. Наш администратор примет ваш автомобиль, обсудит все нюансы, а также проследит '
            'за тщательностью осуществления всех работ. В результате вы получите услугу, оказанную на 100% качественно!</p>\n\n'
            '<p>Выверенные временные интервалы, а также наличие предварительной записи, позволяют нам грамотно распределять своих сотрудников и гарантировать, что услуги будут '
            'выполнены в четко оговоренные сроки.</p>\n\n'
            '<p>По завершению работ мы отдаем клиенту чек, включающий перечень услуг и простановку времени их оказания в соответствии с прейскурантом. Наши расценки никогда не '
            'вызывают сомнений у клиентов, число которых стабильно растет.</p>'
        )

        # Список направлений/услуг
        features = (
            'Полная химчистка салона\n'
            'Химчистка потолка\n'
            'Химчистка дверей и стоек\n'
            'Химчистка сидений (кожа, велюр)\n'
            'Химчистка пола\n'
            'Очистка стекол\n'
            'Очистка пластиковых деталей\n'
            'Озонирование салона\n'
            'Химчистка багажника\n'
            'Чистка колесных дисков\n'
            'Устранение неприятных запахов\n'
            'Дезинфекция салона\n'
            'Выведение пятен от пищи\n'
            'Устранение табачного дыма\n'
            'Удаление желтоватого налета\n'
            'Оборудование KARCHER\n'
            'Профессиональная химия WURTH и BMW\n'
            'Защитная полироль для пластика\n'
            'Покрытие дисков защитным составом\n'
            'Чистка отдельных элементов салона'
        )

        # Обновляем услугу
        service.short_description = short_description
        service.description = description
        service.content = content
        service.features = features
        service.save()

        logger.info(f'Услуга "{service.title}" успешно обновлена')
        self.stdout.write(
            self.style.SUCCESS(f'Услуга "{service.title}" успешно обновлена с подробной информацией')
        )
